<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disha Darshak - Your Career Pathfinder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Simple transition for section visibility */
        .section {
            display: none;
            animation: fadeIn 0.5s;
        }
        .section.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header and Navigation -->
    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#home" class="nav-link text-2xl font-bold text-orange-500">üß≠ Disha Darshak</a>
            <div class="hidden md:flex space-x-6 items-center">
                <a href="#home" class="nav-link text-gray-600 hover:text-orange-500 transition duration-300">Home</a>
                <a href="#quiz" id="aptitude-test-link" class="nav-link text-gray-600 hover:text-orange-500 transition duration-300">Aptitude Test</a>
                <a href="#colleges" class="nav-link text-gray-600 hover:text-orange-500 transition duration-300">Find Colleges</a>
                <a href="#paths" class="nav-link text-gray-600 hover:text-orange-500 transition duration-300">Career Paths</a>
                <a href="#timeline" class="nav-link text-gray-600 hover:text-orange-500 transition duration-300">Timeline</a>
            </div>
             <button id="mobile-menu-button" class="md:hidden p-2 rounded-md">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
             <a href="#home" class="block nav-link text-gray-600 py-2 hover:text-orange-500 transition duration-300">Home</a>
             <a href="#quiz" id="mobile-aptitude-test-link" class="block nav-link text-gray-600 py-2 hover:text-orange-500 transition duration-300">Aptitude Test</a>
             <a href="#colleges" class="block nav-link text-gray-600 py-2 hover:text-orange-500 transition duration-300">Find Colleges</a>
             <a href="#paths" class="block nav-link text-gray-600 py-2 hover:text-orange-500 transition duration-300">Career Paths</a>
             <a href="#timeline" class="block nav-link text-gray-600 py-2 hover:text-orange-500 transition duration-300">Timeline</a>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        <!-- Home Section -->
        <section id="home" class="section active text-center">
            <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100">
                <h1 id="main-heading" class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">Find Your Future Path</h1>
                <p id="sub-heading" class="text-lg text-gray-600 max-w-3xl mx-auto mb-8">Confused after 10th or 12th? Let's start by personalizing your journey.</p>
                
                <div id="user-info-container" class="mt-8 max-w-lg mx-auto text-left">
                    <form id="user-info-form" class="space-y-4 bg-gray-50 p-6 rounded-xl border">
                        <h3 class="text-xl font-semibold mb-4 text-center text-gray-800">Tell us about yourself</h3>
                        <div>
                            <label for="user-name" class="block mb-1 font-medium text-gray-700">Full Name</label>
                            <input type="text" id="user-name" name="user-name" placeholder="e.g. Priya Sharma" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition">
                        </div>
                        <div>
                            <label for="user-city" class="block mb-1 font-medium text-gray-700">City</label>
                            <input type="text" id="user-city" name="user-city" placeholder="e.g. Mumbai" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition">
                        </div>
                        <button type="submit" class="w-full bg-orange-500 text-white font-bold py-3 px-8 rounded-full hover:bg-orange-600 transition-transform transform hover:scale-105 shadow-lg">Next: Select Education Level</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Aptitude Test Section -->
        <section id="quiz" class="section">
            <div id="quiz-container" class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100 max-w-3xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-6">Discover Your Calling</h2>
                <div id="quiz-content">
                    <!-- Quiz questions will be dynamically inserted here -->
                </div>
                <p id="quiz-validation-message" class="text-red-500 text-sm mt-2 text-center hidden"></p>
                <div id="quiz-navigation" class="flex justify-between items-center mt-6">
                    <button id="prev-btn" class="bg-gray-300 text-gray-800 font-bold py-2 px-6 rounded-full hover:bg-gray-400 transition">Previous</button>
                    <p id="question-counter" class="text-sm text-gray-500"></p>
                    <button id="next-btn" class="bg-orange-500 text-white font-bold py-2 px-6 rounded-full hover:bg-orange-600 transition">Next</button>
                </div>
            </div>
            <div id="quiz-result" class="hidden bg-white p-8 rounded-2xl shadow-lg border border-gray-100 max-w-3xl mx-auto text-center">
                <h2 id="result-title" class="text-3xl font-bold mb-4"></h2>
                <p id="result-main-text" class="text-4xl font-extrabold text-green-500 mb-2"></p>
                <p id="result-stream" class="text-xl font-semibold text-orange-500 mb-4"></p>
                <p id="result-description" class="text-gray-600 mb-6"></p>
                <div class="text-left mb-6 p-4 bg-gray-100 rounded-lg">
                    <h4 class="font-bold mb-2">Your dominant traits:</h4>
                    <div id="trait-scores" class="space-y-1"></div>
                </div>
                <button id="retake-quiz-btn" class="bg-orange-500 text-white font-bold py-3 px-8 rounded-full hover:bg-orange-600 transition">Start Over</button>
            </div>
        </section>

        <!-- College Directory Section -->
        <section id="colleges" class="section">
             <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100">
                <h2 id="college-title" class="text-3xl font-bold text-center mb-6">Find Colleges</h2>
                <div id="college-selector-prompt" class="text-center text-gray-600 mb-6 hidden">
                    <p>Please provide your info on the home page to see relevant colleges.</p>
                     <button id="go-home-btn" class="mt-4 bg-orange-500 text-white font-bold py-2 px-6 rounded-full hover:bg-orange-600 transition">Go to Home</button>
                </div>
                <div id="college-filters-and-list">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <input type="text" id="college-search" placeholder="Search by college name or city..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition">
                        <select id="stream-filter" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition">
                            <option value="all">All Streams</option>
                            <option value="Science">Science</option>
                            <option value="Commerce">Commerce</option>
                            <option value="Arts">Arts</option>
                        </select>
                        <select id="budget-filter" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition">
                            <option value="all">Any Budget</option>
                            <option value="0-25000">&lt; ‚Çπ25,000</option>
                            <option value="25000-50000">‚Çπ25,000 - ‚Çπ50,000</option>
                            <option value="50000-100000">‚Çπ50,000 - ‚Çπ1,00,000</option>
                            <option value="100000-9999999">&gt; ‚Çπ1,00,000</option>
                        </select>
                    </div>
                     <!-- NEW: Eligibility Filter -->
                    <div id="eligibility-filter-container" class="mb-6 flex items-center justify-center gap-2 hidden">
                        <input type="checkbox" id="eligibility-filter" class="h-4 w-4 rounded border-gray-300 text-orange-600 focus:ring-orange-500">
                        <label for="eligibility-filter" class="text-gray-700">‚úÖ Show only eligible colleges based on my marks</label>
                    </div>
                    <div id="college-list" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- College cards will be dynamically inserted here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Career Paths Section -->
        <section id="paths" class="section">
             <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100">
                <h2 class="text-3xl font-bold text-center mb-8">Course-to-Career Path Mapping</h2>
                <div id="career-accordion" class="space-y-4">
                    <!-- Accordion items are hardcoded as this is informational -->
                    <div class="accordion-item border rounded-lg overflow-hidden">
                        <button class="accordion-header w-full text-left p-4 bg-orange-100 hover:bg-orange-200 transition">
                            <h3 class="text-xl font-semibold">üî¨ Science Stream (For 11th/12th & Degree)</h3>
                        </button>
                        <div class="accordion-content p-4 bg-white hidden">
                           <p class="font-semibold mb-2">Popular Paths:</p>
                           <ul class="list-disc list-inside text-gray-600 mb-4">
                                <li><strong>After 10th:</strong> Choose Science stream (MPC/BiPC) for Intermediate.</li>
                                <li><strong>After 12th:</strong> Pursue B.Tech, MBBS, B.Sc. in various fields.</li>
                           </ul>
                           <p class="font-semibold mb-2">Career Opportunities:</p>
                           <ul class="list-disc list-inside text-gray-600">
                                <li>IT Professional, Engineer, Doctor, Research Scientist.</li>
                           </ul>
                        </div>
                    </div>
                     <div class="accordion-item border rounded-lg overflow-hidden">
                        <button class="accordion-header w-full text-left p-4 bg-green-100 hover:bg-green-200 transition">
                            <h3 class="text-xl font-semibold">üíº Commerce Stream (For 11th/12th & Degree)</h3>
                        </button>
                        <div class="accordion-content p-4 bg-white hidden">
                           <p class="font-semibold mb-2">Popular Paths:</p>
                           <ul class="list-disc list-inside text-gray-600 mb-4">
                                <li><strong>After 10th:</strong> Choose Commerce stream (CEC) for Intermediate.</li>
                                <li><strong>After 12th:</strong> Pursue B.Com, BBA, CA.</li>
                           </ul>
                           <p class="font-semibold mb-2">Career Opportunities:</p>
                           <ul class="list-disc list-inside text-gray-600">
                                <li>Accountant, Banker, Financial Analyst, Entrepreneur.</li>
                           </ul>
                        </div>
                    </div>
                     <div class="accordion-item border rounded-lg overflow-hidden">
                        <button class="accordion-header w-full text-left p-4 bg-blue-100 hover:bg-blue-200 transition">
                            <h3 class="text-xl font-semibold">üé® Arts Stream (For 11th/12th & Degree)</h3>
                        </button>
                        <div class="accordion-content p-4 bg-white hidden">
                           <p class="font-semibold mb-2">Popular Paths:</p>
                           <ul class="list-disc list-inside text-gray-600 mb-4">
                                <li><strong>After 10th:</strong> Choose Arts/Humanities stream (HEC) for Intermediate.</li>
                                <li><strong>After 12th:</strong> Pursue B.A., Journalism, Law (LL.B).</li>
                           </ul>
                           <p class="font-semibold mb-2">Career Opportunities:</p>
                           <ul class="list-disc list-inside text-gray-600">
                                <li>Civil Servant, Journalist, Lawyer, Teacher.</li>
                           </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Timeline Section -->
        <section id="timeline" class="section">
             <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100 max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-8">Important Dates & Alerts</h2>
                <div class="space-y-6">
                    <div class="p-4 bg-yellow-100 border-l-4 border-yellow-500 rounded-r-lg">
                        <h4 class="font-bold">Inter/Junior College Admissions</h4>
                        <p class="text-sm text-gray-700">Application windows typically open after 10th results: ~ May/June 2026</p>
                    </div>
                    <div class="p-4 bg-red-100 border-l-4 border-red-500 rounded-r-lg">
                        <h4 class="font-bold">State CET/EAMCET for Degree Admissions</h4>
                        <p class="text-sm text-gray-700">Last Date to Apply: ~ March 2026</p>
                    </div>
                    <div class="p-4 bg-blue-100 border-l-4 border-blue-500 rounded-r-lg">
                        <h4 class="font-bold">National Scholarship Portal</h4>
                        <p class="text-sm text-gray-700">Applications open for post-matric scholarships: ~ August 2025</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal for Education Level & Marks -->
    <div id="level-selection-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div id="level-modal-content" class="bg-white rounded-2xl shadow-xl max-w-lg w-full p-8 relative transform transition-all scale-95 opacity-0 text-center">
            <!-- Step 1: Select Level -->
            <div id="level-step-1">
                <h3 class="text-2xl font-bold mb-6">What is your current education level?</h3>
                <div class="flex flex-col md:flex-row gap-4 justify-center">
                    <button data-level="10th" class="level-btn bg-orange-500 text-white font-bold py-3 px-8 rounded-full hover:bg-orange-600 transition-transform transform hover:scale-105">Completed Class 10th</button>
                    <button data-level="12th" class="level-btn bg-green-500 text-white font-bold py-3 px-8 rounded-full hover:bg-green-600 transition-transform transform hover:scale-105">Completed Class 12th</button>
                </div>
            </div>
            <!-- Step 2: Enter Marks -->
            <div id="level-step-2" class="hidden">
                 <h3 id="marks-heading" class="text-2xl font-bold mb-6"></h3>
                 <form id="marks-form">
                     <input type="number" id="user-marks" step="0.01" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition mb-4">
                     <p id="marks-error" class="text-red-500 text-sm mb-4 hidden"></p>
                     <button type="submit" class="w-full bg-indigo-500 text-white font-bold py-3 px-8 rounded-full hover:bg-indigo-600 transition-transform transform hover:scale-105">Continue to Aptitude Test</button>
                 </form>
            </div>
        </div>
    </div>

    <!-- Modal for College Details -->
    <div id="college-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div id="modal-content" class="bg-white rounded-2xl shadow-xl max-w-2xl w-full p-8 relative transform transition-all scale-95 opacity-0">
             <button id="close-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h3 id="modal-title" class="text-2xl font-bold mb-4"></h3>
            <p id="modal-location" class="text-gray-500 mb-4"></p>
            <div id="modal-details" class="space-y-3"></div>
        </div>
    </div>
    
    <footer class="bg-white mt-12 py-6 border-t">
        <div class="container mx-auto text-center text-gray-500">
            <p>&copy; 2025 Disha Darshak. Made for Hackathon with ‚ù§Ô∏è in India.</p>
        </div>
    </footer>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- GLOBAL STATE ---
            let userEducationLevel = null; // Can be '10th' or '12th'
            let userName = null;
            let userCity = null;
            let userMarks = null; // GPA for 10th, % for 12th
            let allColleges10th = [];
            let allColleges12th = [];

            // --- DATA ---
            const quizQuestions10th = [
                {
                    question: "Which subject do you enjoy studying the most?",
                    options: [
                        { text: "Maths and Science - I like solving problems.", stream: "Science" },
                        { text: "Social Studies and Languages - I like reading and understanding society.", stream: "Arts" },
                        { text: "I'm interested in how businesses work and managing money.", stream: "Commerce" }
                    ]
                },
                {
                    question: "What kind of activities do you prefer in your free time?",
                    options: [
                        { text: "Building things, experimenting, or using computers.", stream: "Science" },
                        { text: "Writing, debating, drawing, or learning about different cultures.", stream: "Arts" },
                        { text: "Planning events, budgeting my pocket money, or following market news.", stream: "Commerce" }
                    ]
                },
                {
                    question: "If you think about a future job, what sounds more interesting?",
                    options: [
                        { text: "Becoming an engineer, doctor, or a scientist.", stream: "Science" },
                        { text: "Becoming a journalist, a lawyer, or a government officer.", stream: "Arts" },
                        { text: "Becoming a businessman, a banker, or a financial advisor.", stream: "Commerce" }
                    ]
                }
            ];

            const quizQuestions12th = [
                {
                    question: "A new, complex gadget is released. What's your first reaction?",
                    options: [ { text: "Take it apart to see how it works.", traits: ["Analytical", "Problem-Solving"] }, { text: "Think about how its design could be more beautiful.", traits: ["Creative", "Imaginative"] }, { text: "Analyze its market potential and how to sell it.", traits: ["Strategic", "Organized"] }, { text: "Think about how this gadget could help people in their daily lives.", traits: ["Empathetic", "Communicator"] }]
                },
                {
                    question: "Which of these tasks sounds most appealing?",
                    options: [ { text: "Building a computer program to automate a tedious task.", traits: ["Analytical", "Problem-Solving"] }, { text: "Writing a story or directing a short film.", traits: ["Creative", "Imaginative"] }, { text: "Creating a business plan for a new startup.", traits: ["Strategic", "Organized"] }, { text: "Organizing a community event or teaching a skill to others.", traits: ["Empathetic", "Communicator"] }]
                },
                {
                    question: "When faced with a difficult problem, you tend to:",
                    options: [ { text: "Break it down into smaller, logical steps.", traits: ["Analytical", "Problem-Solving"] }, { text: "Brainstorm unconventional and out-of-the-box ideas.", traits: ["Creative", "Imaginative"] }, { text: "Assess the pros and cons and create a long-term plan.", traits: ["Strategic", "Organized"] }, { text: "Talk to others to understand their perspectives and collaborate on a solution.", traits: ["Empathetic", "Communicator"] }]
                },
                {
                    question: "What kind of work environment would you prefer?",
                    options: [ { text: "A lab or a tech office focused on innovation and data.", traits: ["Analytical", "Problem-Solving"] }, { text: "A studio, a gallery, or a flexible space that encourages new ideas.", traits: ["Creative", "Imaginative"] }, { text: "A corporate office focused on growth, targets, and efficiency.", traits: ["Strategic", "Organized"] }, { text: "A school, a non-profit, or a role that involves direct interaction with people.", traits: ["Empathetic", "Communicator"] }]
                }
            ];
            
            const careerProfiles12th = {
                "Engineer / Technologist": { description: "You have a knack for understanding complex systems and solving logical problems. Careers in engineering, software development, or data science would suit you.", traits: ["Analytical", "Problem-Solving"], stream: "Science" },
                "Creative Professional": { description: "You are driven by imagination and originality. Consider careers in design, writing, arts, or media where you can express your ideas.", traits: ["Creative", "Imaginative"], stream: "Arts" },
                "Business / Finance Professional": { description: "You are a strategic thinker who enjoys planning and organizing. Careers in management, finance, marketing, or entrepreneurship are a great fit.", traits: ["Strategic", "Organized"], stream: "Commerce" },
                "Social Sector Professional / Educator": { description: "You are empathetic and a great communicator, driven by a desire to help others. Consider careers in teaching, counseling, social work, or public policy.", traits: ["Empathetic", "Communicator"], stream: "Arts" }
            };
            
            // --- COLLEGE DATA GENERATION ---
            function generateColleges(count, type) {
                const colleges = [];
                const prefixes = ["National", "Government", "City", "State", "Regional", "Modern", "United"];
                const suffixes10th = ["Junior College", "Polytechnic", "Intermediate College", "Model School"];
                const suffixes12th = ["Institute of Technology", "College of Arts & Science", "University", "Degree College", "Institute of Commerce"];
                const cities = ["Mumbai", "Delhi", "Bengaluru", "Chennai", "Kolkata", "Hyderabad", "Pune", "Ahmedabad", "Jaipur", "Lucknow", "Kanpur", "Nagpur", "Indore", "Thane", "Bhopal", "Visakhapatnam", "Patna", "Vadodara", "Ghaziabad", "Ludhiana"];
                const allStreams = ["Science", "Commerce", "Arts"];
                const allFacilities = ["Hostel", "Lab", "Library", "Internet", "Canteen", "Sports Ground"];

                for (let i = 0; i < count; i++) {
                    const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
                    const suffix = type === '10th' 
                        ? suffixes10th[Math.floor(Math.random() * suffixes10th.length)]
                        : suffixes12th[Math.floor(Math.random() * suffixes12th.length)];
                    const city = cities[Math.floor(Math.random() * cities.length)];
                    const name = `${prefix} ${suffix} of ${city}`;

                    const numStreams = Math.floor(Math.random() * 3) + 1;
                    const streams = [...allStreams].sort(() => 0.5 - Math.random()).slice(0, numStreams);

                    const numFacilities = Math.floor(Math.random() * 3) + 2;
                    const facilities = [...allFacilities].sort(() => 0.5 - Math.random()).slice(0, numFacilities);

                    const cutoff = type === '10th' 
                        ? `${(7.0 + Math.random() * 3.0).toFixed(1)} GPA`
                        : `${Math.floor(60 + Math.random() * 39)}%`;
                    
                    const fees = Math.floor(Math.random() * (150000 - 5000) + 5000);

                    colleges.push({ name, city, streams, facilities, cutoff, fees });
                }
                return colleges;
            }

            // --- INITIALIZE APP ---
            allColleges10th = generateColleges(250, '10th');
            allColleges12th = generateColleges(250, '12th');

            // --- UI ELEMENTS ---
            const sections = document.querySelectorAll('.section');
            const navLinks = document.querySelectorAll('.nav-link');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const levelSelectionModal = document.getElementById('level-selection-modal');
            const levelModalContent = document.getElementById('level-modal-content');
            const userInfoForm = document.getElementById('user-info-form');
            const mainHeading = document.getElementById('main-heading');
            const subHeading = document.getElementById('sub-heading');
            const userInfoContainer = document.getElementById('user-info-container');
            const levelStep1 = document.getElementById('level-step-1');
            const levelStep2 = document.getElementById('level-step-2');
            const marksForm = document.getElementById('marks-form');
            const marksHeading = document.getElementById('marks-heading');
            const userMarksInput = document.getElementById('user-marks');
            const marksError = document.getElementById('marks-error');
            
            // --- SPA NAVIGATION ---
            function showSection(id) {
                sections.forEach(section => {
                    section.classList.toggle('active', section.id === id);
                });
                mobileMenu.classList.add('hidden');
                window.scrollTo(0, 0);

                if (id === 'quiz' && !userMarks) {
                    showLevelSelectionModal();
                } else if (id === 'quiz') {
                    startQuiz();
                } else if (id === 'colleges') {
                    setupCollegePage();
                }
            }

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href').substring(1);
                    if ((targetId === 'quiz' || targetId === 'colleges') && !userName) {
                        showSection('home');
                    } else if ((targetId === 'quiz' || targetId === 'colleges') && !userMarks) {
                        showLevelSelectionModal();
                    }
                    else {
                        showSection(targetId);
                    }
                });
            });

            document.getElementById('go-home-btn').addEventListener('click', () => showSection('home'));
            mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            showSection(window.location.hash.substring(1) || 'home');

            // --- USER INFO FORM LOGIC ---
            userInfoForm.addEventListener('submit', (e) => {
                e.preventDefault();
                userName = document.getElementById('user-name').value.trim();
                userCity = document.getElementById('user-city').value.trim();
                mainHeading.textContent = `Welcome, ${userName}!`;
                subHeading.textContent = `Let's find the perfect path for you in ${userCity}.`;
                userInfoContainer.style.display = 'none';
                showLevelSelectionModal();
            });

            // --- LEVEL & MARKS MODAL LOGIC ---
            function showLevelSelectionModal() {
                levelStep1.classList.remove('hidden');
                levelStep2.classList.add('hidden');
                marksForm.reset();
                levelSelectionModal.classList.remove('hidden');
                setTimeout(() => levelModalContent.classList.remove('scale-95', 'opacity-0'), 10);
            }

            function hideLevelSelectionModal() {
                levelModalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => levelSelectionModal.classList.add('hidden'), 200);
            }

            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    userEducationLevel = e.target.getAttribute('data-level');
                    levelStep1.classList.add('hidden');
                    if(userEducationLevel === '10th'){
                        marksHeading.textContent = "Enter your Class 10th GPA";
                        userMarksInput.placeholder = "e.g., 8.5";
                        userMarksInput.max = 10;
                        userMarksInput.min = 0;
                    } else {
                        marksHeading.textContent = "Enter your Class 12th Percentage";
                        userMarksInput.placeholder = "e.g., 88";
                        userMarksInput.max = 100;
                        userMarksInput.min = 0;
                    }
                    levelStep2.classList.remove('hidden');
                });
            });

            marksForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const marks = parseFloat(userMarksInput.value);
                const max = parseFloat(userMarksInput.max);
                const min = parseFloat(userMarksInput.min);

                if(isNaN(marks) || marks < min || marks > max) {
                    marksError.textContent = `Please enter a valid value between ${min} and ${max}.`;
                    marksError.classList.remove('hidden');
                    return;
                }
                
                marksError.classList.add('hidden');
                userMarks = marks;
                hideLevelSelectionModal();
                showSection('quiz');
            });

            // --- QUIZ LOGIC ---
            const quizContainer = document.getElementById('quiz-container');
            const quizContent = document.getElementById('quiz-content');
            const validationMessage = document.getElementById('quiz-validation-message');
            const nextBtn = document.getElementById('next-btn');
            const prevBtn = document.getElementById('prev-btn');
            const questionCounter = document.getElementById('question-counter');
            const quizResult = document.getElementById('quiz-result');
            const retakeQuizBtn = document.getElementById('retake-quiz-btn');
            let currentQuestions = [];
            let currentQuestionIndex = 0;
            let userAnswers = {};

            function startQuiz() {
                currentQuestions = userEducationLevel === '10th' ? quizQuestions10th : quizQuestions12th;
                currentQuestionIndex = 0;
                userAnswers = {};
                quizResult.classList.add('hidden');
                quizContainer.classList.remove('hidden');
                showQuestion();
            }

            function showQuestion() {
                const question = currentQuestions[currentQuestionIndex];
                let optionsHtml = question.options.map((option, index) => `
                    <label class="block border border-gray-200 rounded-lg p-4 my-2 hover:bg-orange-50 cursor-pointer transition-colors duration-200">
                        <input type="radio" name="q${currentQuestionIndex}" value="${index}" class="mr-3" ${userAnswers[currentQuestionIndex] == index ? 'checked' : ''}>
                        ${option.text}
                    </label>
                `).join('');
                quizContent.innerHTML = `<p class="text-lg font-semibold mb-4">${currentQuestionIndex + 1}. ${question.question}</p>${optionsHtml}`;
                document.querySelectorAll(`input[name="q${currentQuestionIndex}"]`).forEach(radio => radio.addEventListener('change', (e) => {
                    userAnswers[currentQuestionIndex] = parseInt(e.target.value);
                    validationMessage.classList.add('hidden');
                }));
                validationMessage.classList.add('hidden');
                updateQuizNavigation();
            }
            
            function updateQuizNavigation() {
                prevBtn.style.visibility = currentQuestionIndex === 0 ? 'hidden' : 'visible';
                nextBtn.textContent = currentQuestionIndex === currentQuestions.length - 1 ? 'Finish' : 'Next';
                questionCounter.textContent = `Question ${currentQuestionIndex + 1} of ${currentQuestions.length}`;
            }

            nextBtn.addEventListener('click', () => {
                if (userAnswers[currentQuestionIndex] === undefined) {
                    validationMessage.textContent = 'Please select an answer to continue.';
                    validationMessage.classList.remove('hidden');
                    return;
                }
                if (currentQuestionIndex < currentQuestions.length - 1) {
                    currentQuestionIndex++;
                    showQuestion();
                } else {
                    showResults();
                }
            });

            prevBtn.addEventListener('click', () => {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    showQuestion();
                }
            });
            
            retakeQuizBtn.addEventListener('click', () => {
                userEducationLevel = null; userName = null; userCity = null; userMarks = null;
                mainHeading.textContent = 'Find Your Future Path';
                subHeading.textContent = "Confused after 10th or 12th? Let's start by personalizing your journey.";
                userInfoContainer.style.display = 'block';
                userInfoForm.reset();
                showSection('home');
            });

            function showResults() {
                quizContainer.classList.add('hidden');
                quizResult.classList.remove('hidden');

                if (userEducationLevel === '10th') {
                    let scores = { Science: 0, Arts: 0, Commerce: 0 };
                    for (const qIndex in userAnswers) {
                        const optionIndex = userAnswers[qIndex];
                        const stream = currentQuestions[qIndex].options[optionIndex].stream;
                        if(scores.hasOwnProperty(stream)) scores[stream]++;
                    }
                    const bestStream = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
                    
                    document.getElementById('result-title').textContent = "Your Recommended Stream Is...";
                    document.getElementById('result-main-text').textContent = bestStream;
                    document.getElementById('result-stream').textContent = `For your Intermediate / Class 11-12`;
                    document.getElementById('result-description').textContent = `Based on your answers, the ${bestStream} stream seems to be a great fit for your interests and skills.`;
                    document.getElementById('trait-scores').innerHTML = Object.entries(scores).map(([stream, score]) => `<p><span class="font-semibold">${stream}:</span> ${"‚≠ê".repeat(score)}</p>`).join('');

                } else { // 12th
                    let traitScores = {};
                    Object.values(careerProfiles12th).forEach(p => p.traits.forEach(t => { if (!traitScores[t]) traitScores[t] = 0; }));

                    for (const qIndex in userAnswers) {
                        const optionIndex = userAnswers[qIndex];
                        currentQuestions[qIndex].options[optionIndex].traits.forEach(trait => traitScores[trait]++);
                    }
                    
                    let bestProfileName = ""; let maxScore = -1;
                    for (const profileName in careerProfiles12th) {
                        let currentScore = 0;
                        careerProfiles12th[profileName].traits.forEach(trait => { currentScore += traitScores[trait] || 0; });
                        if (currentScore > maxScore) { maxScore = currentScore; bestProfileName = profileName; }
                    }
                    
                    const resultProfile = careerProfiles12th[bestProfileName];
                    document.getElementById('result-title').textContent = "Your Recommended Career Profile Is...";
                    document.getElementById('result-main-text').textContent = bestProfileName;
                    document.getElementById('result-stream').textContent = `Suggested Degree Stream: ${resultProfile.stream}`;
                    document.getElementById('result-description').textContent = resultProfile.description;
                    const sortedTraits = Object.entries(traitScores).sort(([,a],[,b]) => b-a);
                    document.getElementById('trait-scores').innerHTML = sortedTraits.map(([trait, score]) => `<p><span class="font-semibold">${trait}:</span> ${"‚≠ê".repeat(score)}</p>`).join('');
                }
            }

            // --- COLLEGE DIRECTORY LOGIC ---
            const collegeList = document.getElementById('college-list');
            const searchInput = document.getElementById('college-search');
            const streamFilter = document.getElementById('stream-filter');
            const budgetFilter = document.getElementById('budget-filter');
            const eligibilityFilter = document.getElementById('eligibility-filter');
            const eligibilityContainer = document.getElementById('eligibility-filter-container');
            const collegeTitle = document.getElementById('college-title');
            const collegeSelectorPrompt = document.getElementById('college-selector-prompt');
            const collegeFiltersAndList = document.getElementById('college-filters-and-list');

            function setupCollegePage() {
                if (!userEducationLevel) {
                    collegeSelectorPrompt.classList.remove('hidden');
                    collegeFiltersAndList.classList.add('hidden');
                    eligibilityContainer.classList.add('hidden');
                } else {
                    collegeSelectorPrompt.classList.add('hidden');
                    collegeFiltersAndList.classList.remove('hidden');
                    eligibilityContainer.classList.remove('hidden');
                    collegeTitle.textContent = userEducationLevel === '10th' ? 'Find Junior Colleges' : 'Find Degree Colleges';
                    filterAndRender();
                }
            }

            function renderColleges(filteredColleges) {
                if (!filteredColleges || filteredColleges.length === 0) {
                    collegeList.innerHTML = `<p class="text-center text-gray-500 col-span-full">No colleges found matching your criteria.</p>`;
                    return;
                }
                collegeList.innerHTML = filteredColleges.map(college => `
                    <div class="bg-white border rounded-lg p-4 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300 flex flex-col">
                        <h4 class="text-lg font-bold text-gray-900">${college.name}</h4>
                        <p class="text-gray-500 mb-2">${college.city}</p>
                         <p class="font-bold text-green-600 mb-2">‚Çπ${college.fees.toLocaleString('en-IN')}/year</p>
                        <div class="flex flex-wrap gap-2 mb-4">
                            ${college.streams.map(s => `<span class="bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded-full">${s}</span>`).join('')}
                        </div>
                        <div class="mt-auto">
                            <button class="view-details-btn w-full bg-orange-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-orange-600 transition" data-name="${college.name}">View Details</button>
                        </div>
                    </div>
                `).join('');

                 document.querySelectorAll('.view-details-btn').forEach(button => {
                    button.addEventListener('click', () => {
                        const collegeName = button.getAttribute('data-name');
                        const collegeData = userEducationLevel === '10th' ? allColleges10th : allColleges12th;
                        const college = collegeData.find(c => c.name === collegeName);
                        showCollegeModal(college);
                    });
                });
            }

            function filterAndRender() {
                const collegeData = userEducationLevel === '10th' ? allColleges10th : allColleges12th;
                if (!collegeData) { renderColleges([]); return; }

                const searchTerm = searchInput.value.toLowerCase();
                const selectedStream = streamFilter.value;
                const selectedBudget = budgetFilter.value;
                const onlyEligible = eligibilityFilter.checked;

                const filteredColleges = collegeData.filter(college => {
                    const nameMatch = college.name.toLowerCase().includes(searchTerm) || college.city.toLowerCase().includes(searchTerm);
                    const streamMatch = selectedStream === 'all' || college.streams.includes(selectedStream);
                    
                    let budgetMatch = true;
                    if (selectedBudget !== 'all') {
                        const [min, max] = selectedBudget.split('-').map(Number);
                        budgetMatch = college.fees >= min && college.fees <= max;
                    }

                    let eligibilityMatch = true;
                    if(onlyEligible && userMarks) {
                        const cutoffValue = parseFloat(college.cutoff);
                        eligibilityMatch = userMarks >= cutoffValue;
                    }

                    return nameMatch && streamMatch && budgetMatch && eligibilityMatch;
                });
                renderColleges(filteredColleges);
            }

            searchInput.addEventListener('input', filterAndRender);
            streamFilter.addEventListener('change', filterAndRender);
            budgetFilter.addEventListener('change', filterAndRender);
            eligibilityFilter.addEventListener('change', filterAndRender);

            // --- COLLEGE MODAL LOGIC ---
            const collegeModal = document.getElementById('college-modal');
            const modalContent = document.getElementById('modal-content');
            const closeModalBtn = document.getElementById('close-modal');

            function getScholarshipInfo(marks, level) {
                if (!marks) return '<p class="text-sm text-gray-500">Enter your marks for a scholarship estimate.</p>';

                let message = 'Check college website for specific schemes.';
                let style = 'bg-gray-100 text-gray-800';

                const highThreshold = level === '10th' ? 9.5 : 95;
                const midThreshold = level === '10th' ? 8.5 : 85;

                if (marks >= highThreshold) {
                    message = 'Excellent! You may be eligible for a <strong>Merit Scholarship (up to 100% tuition waiver)</strong>.';
                    style = 'bg-green-100 text-green-800';
                } else if (marks >= midThreshold) {
                    message = 'Great! You may be eligible for an <strong>Academic Excellence Grant (up to 50% tuition waiver)</strong>.';
                    style = 'bg-yellow-100 text-yellow-800';
                }
                
                return `<div class="p-3 rounded-lg ${style}">${message}</div>`;
            }

            function showCollegeModal(college) {
                document.getElementById('modal-title').textContent = college.name;
                document.getElementById('modal-location').textContent = `üìç ${college.city}`;
                
                const scholarshipHTML = getScholarshipInfo(userMarks, userEducationLevel);

                document.getElementById('modal-details').innerHTML = `
                    <p><strong>Eligibility / Cut-off:</strong> ${college.cutoff}</p>
                    <p><strong>Annual Fees:</strong> ‚Çπ${college.fees.toLocaleString('en-IN')}</p>
                    <p><strong>Streams Offered:</strong> ${college.streams.join(', ')}</p>
                    <p><strong>Facilities:</strong> ${college.facilities.join(', ')}</p>
                    <div class="mt-4">
                        <h4 class="font-semibold mb-2">Scholarship Estimate:</h4>
                        ${scholarshipHTML}
                    </div>
                `;
                collegeModal.classList.remove('hidden');
                setTimeout(() => modalContent.classList.remove('scale-95', 'opacity-0'), 10);
            }

            function hideCollegeModal() {
                 modalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => collegeModal.classList.add('hidden'), 200);
            }

            closeModalBtn.addEventListener('click', hideCollegeModal);
            collegeModal.addEventListener('click', (e) => {
                if (e.target === collegeModal) hideCollegeModal();
            });

            // --- CAREER PATHS ACCORDION ---
            document.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    header.nextElementSibling.classList.toggle('hidden');
                });
            });
        });
    </script>
</body>
</html>

